generator client {
  provider     = "prisma-client"
  output       = "../generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model User {
  id          Int          @id @default(autoincrement())
  email       String       @unique
  password    String
  name        String?
  owner       Boolean      @default(false)
  collections Collection[]
  navigation  NavHeading[]
}

model Collection {
  id                Int      @id @default(autoincrement())
  timestamp         DateTime
  title             String
  heading           String
  headerImageString String
  posts             Post[]
  published         Boolean  @default(true)
  author            User     @relation(fields: [authorId], references: [id])
  authorId          Int
}

model Post {
  id           Int        @id @default(autoincrement())
  title        String
  content      Json
  published    Boolean    @default(true)
  timestamp    DateTime
  modified     DateTime?
  collection   Collection @relation(fields: [collectionId], references: [id], onDelete: Cascade)
  collectionId Int
}

model NavHeading {
  id        Int         @id @default(autoincrement())
  blogTitle String
  navRow    NavMember[]
  author    User        @relation(fields: [authorId], references: [id])
  authorId  Int
}

model NavMember {
  id           Int        @id @default(autoincrement())
  title        String
  content      Json
  navHeading   NavHeading @relation(fields: [collectionId], references: [id], onDelete: Cascade)
  collectionId Int
}
